{% extends "base.html" %}

{% block title %}Профиль пользователя{% endblock %}

{% block content %}
<h1>Профиль пользователя</h1>

<div id="user-info">
    <p>Загрузка данных...</p>
</div>

<h2>Инвентарь</h2>
<div id="inventory-container">
    <p>Загрузка инвентаря...</p>
</div>

<script>
  // Передача user_id из Flask
  const userId = {{ user_id }};

  // Загружаем данные пользователя
  fetch(`/api/user/${userId}`)
    .then(res => {
      if (!res.ok) {
        throw new Error('Ошибка при загрузке данных');
      }
      return res.json();
    })
    .then(data => {
      const user = data.user;
      const infoDiv = document.getElementById('user-info');

      // Формируем HTML с данными пользователя
      infoDiv.innerHTML = `
        <p><strong>ID:</strong> ${user.id}</p>
        <p><strong>Имя:</strong> ${user.name}</p>
        <p><strong>Никнейм:</strong> ${user.user_name}</p>
        <p><strong>Email:</strong> ${user.email}</p>
        <p><strong>FGL:</strong> ${user.figli_coins}</p>
      `;
    })
    .catch(error => {
      document.getElementById('user-info').innerHTML = '<p>Не удалось загрузить данные пользователя.</p>';
      console.error(error);
    });

</script>

{% endblock %}